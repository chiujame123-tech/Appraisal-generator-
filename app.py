import streamlit as st

def generate_k_command_appraisal(name, rank, traits, cases, station_duties, events, rating, training, future_plan):
    # ç¬¬ä¸€æ®µï¼šå€‹äººç‰¹è³ª
    para1 = f"{rank}{name}{traits}ã€‚ä»–/å¥¹è‡ªæˆ‘è¦æ±‚åš´è¬¹ï¼Œç¶“å¸¸ä¿æŒè‰¯å¥½çš„å„€å®¹å’Œèˆ‰æ­¢ã€‚å¦ä¸€æ–¹é¢ä»–/å¥¹å¹³æ˜“è¿‘äººèˆ‡åŒäº‹èæ´½ç›¸è™•ï¼Œåœ¨å±€å…§èƒ½ç‡Ÿé€ å‡ºå’Œè«§çš„æ°£æ°›ã€‚"
    
    # ç¬¬äºŒæ®µï¼šè¡Œå‹•è¡¨ç¾èˆ‡æ¡ˆä¾‹
    para2 = f"åœ¨è¡Œå‹•å·¥ä½œæ–¹é¢ï¼Œ{name[0]}éšŠç›®æ“æœ‰æ¥µå¼·çš„åˆ†æåŠæŠ—å£“èƒ½åŠ›ï¼ŒåŠ ä¸Šè±å¯Œçš„å‰ç·šæ•‘æ´ç¶“é©—ï¼Œå°çªç™¼äº‹æ•…çš„æ‡‰è®Šæœ‰é€å¾¹çš„èªè­˜ã€‚{cases}"
    
    # ç¬¬ä¸‰æ®µï¼šå±€å…§å·¥ä½œ
    para3 = f"åœ¨å±€å…§å·¥ä½œæ–¹é¢ï¼Œ{name[0]}éšŠç›®æ¥µä¹‹èƒ½å¹¹å¯é ã€‚{station_duties}æ­¤å¤–ï¼Œä»–/å¥¹æœƒä¸»å‹•å¸¶é ˜å¹´è³‡è¼ƒæ·ºçš„éšŠå“¡ï¼Œç‚ºä»–å€‘å·¥ä½œä¸Šé‡åˆ°çš„å•é¡Œæä¾›æ„è¦‹ï¼Œå”åŠ©é©æ‡‰å¿™ç¢Œçš„å·¥ä½œç’°å¢ƒã€‚"
    
    # ç¬¬å››æ®µï¼šéƒ¨é–€æ´»å‹•èˆ‡ç¸½çµ
    para4 = f"{name[0]}éšŠç›®äº¦éå¸¸æ”¯æŒéƒ¨é–€æ´»å‹•ï¼Œä¾‹å¦‚å”åŠ©èˆ‰è¾¦{events}ï¼Œåæ˜ å…¶å¿ƒç¹«ç¤¾æœƒã€‚æ•´é«”ä¾†èªªï¼Œ{name[0]}éšŠç›®åœ¨è©•æ ¸æœŸå…§å„æ–¹é¢å·¥ä½œè¡¨ç¾ä»¤äººæ»¿æ„ï¼Œæ•…æ­¤æˆ‘æŠŠä»–çš„è¡¨ç¾è©•ç‚ºã€Œ{rating}ã€ç´šã€‚åœ¨è¨“ç·´æ–¹é¢ï¼Œæˆ‘å»ºè­°ä»–åƒåŠ {training}ã€‚å°æ–¼ä»–/å¥¹{future_plan}çš„æ„é¡˜ï¼Œæˆ‘å°æ­¤è¡¨ç¤ºæ”¯æŒã€‚"
    
    return f"{para1}\n\n{para2}\n\n{para3}\n\n{para4}"

st.set_page_config(page_title="æ¶ˆé˜²è€ƒç¸¾ç”Ÿæˆå™¨", layout="wide")
st.title("ğŸ“ æ¶ˆé˜²äººå“¡è€ƒç¸¾ç”Ÿæˆå™¨ (Appraisal Generator)")

# å´é‚Šæ¬„ï¼šé¸æ“‡æŒ‡æ®å–®ä½
command = st.sidebar.selectbox("è«‹é¸æ“‡å–®ä½ (Command Style)", ["K Command (ä¹é¾)", "å…¶ä»–å–®ä½ (å¾…æ–°å¢)"])

if command == "K Command (ä¹é¾)":
    st.header("K Command è€ƒç¸¾è³‡æ–™è¼¸å…¥")
    
    # å»ºç«‹å…©æ’è¼¸å…¥æ¬„ä½ï¼Œè®“ç‰ˆé¢æ›´ç°¡æ½”
    col1, col2 = st.columns(2)
    with col1:
        member_name = st.text_input("äººå“¡å§“å", "ç‹åœ‹è‰¯")
        member_rank = st.selectbox("è·ç´š", ["æ¶ˆé˜²éšŠç›®", "æ¶ˆé˜²ç¸½éšŠç›®", "æ¶ˆé˜²å“¡"])
        overall_rating = st.selectbox("æ•´é«”è©•ç´š", ["å„ª", "è‰¯", "ç•¶", "å¯", "å·®", "åŠ£"])
    with col2:
        training_rec = st.text_input("å»ºè­°è¨“ç·´èª²ç¨‹", "ç…™ç«ç‰¹æ”»å“¡è¨“ç·´èª²ç¨‹")
        future_plan = st.text_input("æœªä¾†å‹•å‘æ„é¡˜", "å¸Œæœ›ç¹¼çºŒç•™åœ¨è¡Œå‹•ç¸½å€å·¥ä½œ")

    st.subheader("1. å€‹äººç‰¹è³ªèˆ‡ç´€å¾‹")
    traits_input = st.text_area("è«‹ç°¡è¿°å…¶å·¥ä½œæ…‹åº¦èˆ‡ç´€å¾‹ (ä¾‹å¦‚ï¼šå°å·¥ä½œç›¡å¿ è·å®ˆï¼Œæ¥µç‚ºåš´å®ˆç´€å¾‹...)", 
                                "æ˜¯ä¸€å€‹ç´€å¾‹æ€§æ¥µå¼·ï¼Œå·¥ä½œæ…‹åº¦ååˆ†èªçœŸï¼Œæ¥µå…·è²¬ä»»æ„ŸåŠå¹¹å‹çš„æ¶ˆé˜²äººå“¡ã€‚ä»–æœƒé©æ™‚æ»™å ±ä¸Šç´šå§”æ´¾äºˆä»–çš„å·¥ä½œé€²åº¦ï¼Œæ˜¯ä¸€åæ¥µä¹‹å¯é çš„å‰¯æ‰‹")

    st.subheader("2. å…·é«”äº‹æ•…æ¡ˆä¾‹ (è¡Œå‹•è¡¨ç¾)")
    cases_input = st.text_area("è«‹è¼¸å…¥åƒèˆ‡çš„é‡å¤§äº‹æ•…ç´°ç¯€ (æ—¥æœŸã€åœ°é»ã€æ“”ä»»è§’è‰²ã€è™•ç†æ‰‹æ³•åŠçµæœ)", 
                               "ä¾‹å¦‚åœ¨äºŒé›¶äºŒå››å¹´å››æœˆåæ—¥ä½æ•¦é“è¯è±å¤§å»ˆä¸‰ç´šç«è­¦ä¸­ï¼Œç•¶æ—¥ä½œç‚ºæ³µè»ŠéšŠç›®ï¼Œèˆ‡éšŠå“¡è¿…é€Ÿé–‹å–‰åˆ°ç«è­¦æ¨“å±¤é€²è¡Œæ»…ç«åŠæœæ•‘å·¥ä½œï¼Œä¸¦ç¢ºèªæ²’æœ‰è¢«å›°äººå£«ï¼Œéˆæ´»é‹ç”¨äººæ‰‹å‚³éè¨Šæ¯ï¼Œå¤§å¤§åŠ å¼·äº†ç¾å ´çš„æºé€šåŠå”èª¿ã€‚")

    st.subheader("3. å±€å…§å·¥ä½œè¡¨ç¾")
    station_duties_input = st.text_area("è«‹ç°¡è¿°å±€å…§è¡Œæ”¿æˆ–æ“ç·´ç­–åŠƒè¡¨ç¾", 
                                        "é™¤äº†å”åŠ©ç®¡ç†å±€å…§å„å½¢å„è‰²çš„æ—¥å¸¸è¡Œå‹•äº‹å‹™å¤–ï¼Œé‚„æœƒæ¥µç‚ºç©æ¥µå”åŠ©éšŠé•·è™•ç†å±€å…§è¡Œæ”¿å·¥ä½œã€‚åœ¨éšŠå“¡çš„æ“ç·´æ–¹é¢ï¼Œæœƒä¸»å‹•å‘ä¸»ç®¡æå‡ºå»ºè­°ï¼Œä¸¦æ‚‰å¿ƒè¨­è¨ˆå‡ºèˆ‡çœŸå¯¦ç’°å¢ƒç›¸ä¼¼çš„è¨“ç·´ã€‚")

    st.subheader("4. åƒèˆ‡éƒ¨é–€æ´»å‹•")
    events_input = st.text_area("è«‹åˆ—å‡ºåƒèˆ‡çš„æ´»å‹• (ä»¥é€—è™Ÿåˆ†éš”)", 
                                "æ²¹å°–æ—ºç¤¾å€æ‡‰æ€¥é˜²ç«å˜‰å¹´è¯2024ï¼Œæ¶ˆé˜²è™•åœ‹å®¶å®‰å…¨å±•è¦½å»³åœ˜é«”åƒè§€")

    # ç”ŸæˆæŒ‰éˆ•
    if st.button("ç”Ÿæˆ K Command è€ƒç¸¾å ±å‘Š", type="primary"):
        with st.spinner('æ­£åœ¨ç”Ÿæˆå ±å‘Šä¸­...'):
            final_appraisal = generate_k_command_appraisal(
                member_name, member_rank, traits_input, cases_input, 
                station_duties_input, events_input, overall_rating, 
                training_rec, future_plan
            )
            st.success("âœ… ç”ŸæˆæˆåŠŸï¼è«‹è¤‡è£½ä¸‹æ–¹æ–‡æœ¬ï¼š")
            st.text_area("è€ƒç¸¾å ±å‘Šçµæœ", final_appraisal, height=400)

